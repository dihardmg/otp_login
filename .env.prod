# Environment Configuration
SPRING_PROFILES_ACTIVE=prod

# Application Configuration
APP_NAME=otp-login-api
APP_PORT=8080
APP_INTERNAL_PORT=8080
APP_CONTEXT_PATH=/

# Docker Container Configuration
APP_CONTAINER_NAME=otp-app-prod
APP_RESTART=always
APP_LOGS_PATH=./logs
APP_HEALTH_INTERVAL=60s
APP_HEALTH_TIMEOUT=30s
APP_HEALTH_RETRIES=5
APP_HEALTH_START_PERIOD=120s
APP_BUILD_TARGET=production
APP_MEMORY_LIMIT=1G
APP_CPU_LIMIT=1.0
APP_MEMORY_RESERVATION=512M
APP_CPU_RESERVATION=0.5

# PostgreSQL Docker Configuration
POSTGRES_IMAGE=postgres:15-alpine
POSTGRES_CONTAINER_NAME=otp-postgres-prod
POSTGRES_RESTART=always
POSTGRES_HEALTH_INTERVAL=30s
POSTGRES_HEALTH_TIMEOUT=10s
POSTGRES_HEALTH_RETRIES=10
POSTGRES_VOLUME_NAME=postgres_data_prod
POSTGRES_INIT_SCRIPTS_PATH=./init-scripts
POSTGRES_MEMORY_LIMIT=1G
POSTGRES_CPU_LIMIT=0.5
POSTGRES_MEMORY_RESERVATION=512M
POSTGRES_CPU_RESERVATION=0.25

# Redis Docker Configuration
REDIS_IMAGE=redis:7-alpine
REDIS_CONTAINER_NAME=otp-redis-prod
REDIS_RESTART=always
REDIS_HEALTH_INTERVAL=30s
REDIS_HEALTH_TIMEOUT=10s
REDIS_HEALTH_RETRIES=5
REDIS_VOLUME_NAME=redis_data_prod
REDIS_TIMEOUT_VALUE=5000
REDIS_MEMORY_LIMIT=512M
REDIS_CPU_LIMIT=0.25
REDIS_MEMORY_RESERVATION=256M
REDIS_CPU_RESERVATION=0.1

# Nginx Docker Configuration
NGINX_IMAGE=nginx:alpine
NGINX_CONTAINER_NAME=otp-nginx
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
NGINX_CONFIG_PATH=./nginx/nginx.conf
NGINX_SSL_PATH=./nginx/ssl
NGINX_RESTART=always
NGINX_HEALTH_INTERVAL=30s
NGINX_HEALTH_TIMEOUT=10s
NGINX_HEALTH_RETRIES=3
NGINX_HEALTH_PATH=/health

# Network Configuration
NETWORK_NAME=otp-network

# Docker Health Checks
POSTGRES_HEALTH_INTERVAL=30s
POSTGRES_HEALTH_TIMEOUT=10s
POSTGRES_HEALTH_RETRIES=10

REDIS_HEALTH_INTERVAL=30s
REDIS_HEALTH_TIMEOUT=10s
REDIS_HEALTH_RETRIES=5

APP_HEALTH_INTERVAL=60s
APP_HEALTH_TIMEOUT=30s
APP_HEALTH_RETRIES=5
APP_HEALTH_START_PERIOD=120s

# Docker Paths
APP_LOGS_PATH=./logs
REDIS_CONFIG_PATH=

# Database Configuration (PostgreSQL)
POSTGRES_DB=otp_db_prod
POSTGRES_USER=otp_user
POSTGRES_PASSWORD=your_secure_postgres_password_here
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=jdbc:postgresql://postgres:5432/otp_db_prod?useSSL=false&rewriteBatchedStatements=true

# Docker-specific settings for production
DATABASE_USE_SSL=false
DATABASE_SSL_MODE=
REDIS_PASSWORD_FLAG=--requirepass
# REDIS_PING_COMMAND=--no-auth-warning -a ${REDIS_PASSWORD}
REDIS_MEMORY_SETTINGS=--maxmemory 256mb --maxmemory-policy allkeys-lru


# Database Connection Pool
DB_POOL_SIZE=30
DB_POOL_MIN_IDLE=10
DB_POOL_IDLE_TIMEOUT=60000
DB_POOL_MAX_LIFETIME=1800000
DB_POOL_CONNECTION_TIMEOUT=3000

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=prod_redis_password_2024
REDIS_TIMEOUT=5000ms
REDIS_POOL_MAX_ACTIVE=20
REDIS_POOL_MAX_IDLE=10
REDIS_POOL_MIN_IDLE=5

# JWT Configuration
JWT_SECRET=your_production_jwt_secret_key_minimum_32_characters
JWT_ACCESS_TOKEN_EXPIRATION_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRATION_DAYS=30

# OTP Configuration
OTP_EXPIRATION_MINUTES=5
OTP_LENGTH=6
OTP_MAX_ATTEMPTS=3

# Email Configuration (SendGrid)
MAIL_HOST=smtp.sendgrid.net
MAIL_PORT=587
MAIL_USERNAME=apikey
MAIL_PASSWORD=your_api_key_sendgrid
MAIL_FROM=dihardmg@gmail.com
MAIL_SMTP_AUTH=true
MAIL_SMTP_STARTTLS=true
MAIL_SMTP_TRUST=smtp.sendgrid.net
MAIL_TIMEOUT=10000
MAIL_DEBUG=false


# Logging Configuration
LOG_LEVEL_APP=INFO
LOG_LEVEL_SECURITY=WARN
LOG_LEVEL_WEB=WARN
LOG_PATTERN_CONSOLE=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
LOG_PATTERN_FILE=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Production Configuration
DEVTOOLS_RESTART_ENABLED=false
DEVTOOLS_LIVERELOAD_ENABLED=false

# Rate Limiting Configuration
RATE_LIMIT_REQUESTS_PER_MINUTE=30
RATE_LIMIT_BURST_CAPACITY=5

# Health and Monitoring
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=when-authorized
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics